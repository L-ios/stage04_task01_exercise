搭建一个MySQL高可用架构集群环境4台主机 **(1主  2从 1 MHA)**

* 实现一主两从的同步复制功能采用**半同步复制机制**
* 然后采用MHA实现主机出故障从库能**自动切换功能**

MHA高可用搭建后在主库新建商品表进行效果测试

在拉勾业务中职位表相当于电商系统的商品表投递表相当于电商系统的订单表职位表我们采用**垂直拆分**方法分为position职位描述表和 position_detail职位详情表表结构结构如下

```
position
	id(int)
 	name(varchar)
 	salary(varchar)
 	city(varchar)
```

```
position_detail
	id(int)
	pid(int)
	description(text)
```

作业需要提交集群环境搭建手册和效果演示视频

手册包含环境软件版本和架构介绍环境安装过程操作的问题和注意事项等

视频仅录制环境介绍和效果演示

----------------------------------------------------------------------------

作业资料说明

1. 提供资料说明文档验证及讲解视频

2. 讲解内容包含题目分析实现思路环境介绍

3. 说明文档包含

   * 环境软件版本架构介绍

   * 环境安装过程各个配置加注释

   * 操作过程中遇到的问题

   * 操作注意事项

4. 效果视频验证

   * 集群环境
     * 4台
     * 1主 2从 1MHA
     * 一主两从的半同步复制功能
     * MHA实现主机出故障从库能自动切换功能

   * 环境介绍

     * 介绍涉及的各个软件的版本
     * 介绍各个机器对应角色&作用&ip地址

   * 主库新建商品表

   * 添加数据，演示半同步复制

     * 先查询主从库数据
     * 添加后再次查询主从库数据
     * 查看log是否显示半同步

   *  主机出故障从库能自动切换功能

     * 关闭 主服务器，查看MHA服务器是否正常切换

        App1:mysql Master failower 之前主ip(之前主ip:3306) to 切换后ip(切换后ip:3306) succeeded

     * 在切换后的主节点机器上查看状态展示效果
     * 在切换后的主节点机器数据库添加数据分别查询主从库数据一致

------------------------------------------------------------------------------------------------------------
